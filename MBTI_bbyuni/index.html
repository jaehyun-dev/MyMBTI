<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>쀼니의 선물가게 MBTI</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden; /* 페이지 내용이 화면을 넘어갈 경우 스크롤을 숨김 */
      }

      #start-background-image {
        position: relative;
        width: 100%;
        height: 100vh; /* 화면 높이에 맞게 설정 */
        background: url("img/start/시작페이지_bg.jpg") center/contain no-repeat,
          white;
      }

      #title-container,
      #start-button-container {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
      }

      #title-image,
      #start-button-image {
        max-width: 100%;
        height: auto;
        cursor: pointer; /* 버튼에 커서를 포인터로 변경하여 클릭 가능함을 나타냄 */
      }

      #title-container {
        top: 5%;
      }

      #start-button-container {
        bottom: 20%;
      }

      #qna {
        display: none;
      }

      #qna-background-image {
        position: relative;
        width: 100%;
        height: 100vh; /* 화면 높이에 맞게 설정 */
        background: url("img/qna/E-I/1번.png") center/contain no-repeat, white;
      }

      /* #default-background-image {
        position: relative;
        width: 100%;
        height: 100vh;
        background: url("img/배경화면.jpg") center/contain no-repeat, white;
      } */

      #default-container {
        display: flex;
        position: relative;
        width: 100%;
        height: 100vh;
        justify-content: center;
        justify-self: center;
        justify-items: center;
      }

      #qna-answer-button1 {
        position: absolute;
        top: 55%;
        left: 50%;
        transform: translateX(-50%);
        max-width: 100%;
        height: auto;
        cursor: pointer;
      }

      #qna-answer-button2 {
        position: absolute;
        top: 70%;
        left: 50%;
        transform: translateX(-50%);
        max-width: 100%;
        height: auto;
        cursor: pointer;
      }

      #result {
        display: none; /* 기본적으로 숨김 처리 */
      }

      #result-background-image {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100vh; /* 화면 높이에 맞게 설정 */
        background: url("img/result/INTP.jpg") center/contain no-repeat white;
      }

      #result-button-container {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        height: 200px;
        width: 500px;
        background: center/contain no-repeat;
      }

      #result-button-container a {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 200px;
      }

      #result-button-container img {
        display: block;
        margin: auto 20px;
        height: 100px;
        width: 100px;
        cursor: pointer;
        object-fit: cover;
      }
    </style>
  </head>
  <body>
    <section id="main">
      <div id="start-background-image">
        <div id="title-container" onclick="start()">
          <img
            id="title-image"
            src="img/start/시작-타이틀.png"
            alt="Title Image"
          />
        </div>
        <div id="start-button-container" onclick="start()">
          <img
            id="start-button-image"
            src="img/start/시작-버튼.png"
            alt="Start Button"
          />
        </div>
      </div>
    </section>
    <section id="qna">
      <div id="qna-background-image" alt="Qna background image">
        <img
          id="qna-answer-button1"
          src="img/qna/E-I/1번-E.png"
          alt="Qna Answer Button 1"
          onclick="changeQuestionAndAnswer1()"
        />
        <img
          id="qna-answer-button2"
          src="img/qna/E-I/1번-I.png"
          alt="Qna Answer Button 2"
          onclick="changeQuestionAndAnswer2()"
        />
      </div>
    </section>
    <section id="result">
      <div id="default-container">
        <div id="result-background-image"></div>
        <div style="position: absolute; top: 75%">
          <div id="result-button-container">
            <a>
              <img
                id="share"
                src="img/result/하단아이콘-1.jpg"
                alt="Share Button"
              />
            </a>
            <a href="img/result/INTP.jpg" download>
              <img
                id="download"
                src="img/result/하단아이콘-2.jpg"
                alt="Download Button"
              />
            </a>
            <a href="https://smartstore.naver.com/bbyura">
              <img
                id="store"
                src="img/result/하단아이콘-3.jpg"
                alt="Store Button"
              />
            </a>
          </div>
        </div>
      </div>
    </section>
    <script>
      const main = document.querySelector("#main");
      const qna = document.querySelector("#qna");
      const result = document.querySelector("#result");
      const qnaBackground = document.querySelector("#qna-background-image");
      const answerButton1 = document.querySelector("#qna-answer-button1");
      const answerButton2 = document.querySelector("#qna-answer-button2");
      const resultBackgroundImage = document.querySelector(
        "#result-background-image"
      );
      // const resultImageUrl = getComputedStyle(document.getElementById('result-background-image')).backgroundImage;
      // const imageUrl = backgroundImage.replace(/url\(['"]?([^'"]*)['"]?\)/, '$1');
      // document.getElementById('download').parentElement.href = imageUrl;s

      const qnaBackgroundList = [
        "img/qna/E-I/1번.png",
        "img/qna/E-I/2번.png",
        "img/qna/E-I/3번.png",
        "img/qna/N-S/4번.png",
        "img/qna/N-S/5번.png",
        "img/qna/N-S/6번.png",
        "img/qna/F-T/7번.png",
        "img/qna/F-T/8번.png",
        "img/qna/F-T/9번.png",
        "img/qna/F-T/10번.png",
        "img/qna/F-T/11번.png",
        "img/qna/P-J/12번.png",
        "img/qna/P-J/13번.png",
        "img/qna/P-J/14번.png",
      ];
      const answerButton1List = [
        "img/qna/E-I/1번-E.png",
        "img/qna/E-I/2번-I.png",
        "img/qna/E-I/3번-E.png",
        "img/qna/N-S/4번-N.png",
        "img/qna/N-S/5번-S.png",
        "img/qna/N-S/6번-N.png",
        "img/qna/F-T/7번-F.png",
        "img/qna/F-T/8번-T.png",
        "img/qna/F-T/9번-F.png",
        "img/qna/F-T/10번-T.png",
        "img/qna/F-T/11번-F.png",
        "img/qna/P-J/12번-J.png",
        "img/qna/P-J/13번-P.png",
        "img/qna/P-J/14번-J.png",
      ];
      const answerButton2List = [
        "img/qna/E-I/1번-I.png",
        "img/qna/E-I/2번-E.png",
        "img/qna/E-I/3번-I.png",
        "img/qna/N-S/4번-S.png",
        "img/qna/N-S/5번-N.png",
        "img/qna/N-S/6번-S.png",
        "img/qna/F-T/7번-T.png",
        "img/qna/F-T/8번-F.png",
        "img/qna/F-T/9번-T.png",
        "img/qna/F-T/10번-F.png",
        "img/qna/F-T/11번-T.png",
        "img/qna/P-J/12번-P.png",
        "img/qna/P-J/13번-J.png",
        "img/qna/P-J/14번-P.png",
      ];

      let i = 0;
      let E = 0;
      let I = 0;
      let F = 0;
      let T = 0;
      let N = 0;
      let S = 0;
      let P = 0;
      let J = 0;
      let res = "";

      let currentQnaImage = qnaBackgroundList[i];
      let currentAnswerButton1Image = answerButton1List[i];
      let currentAnswerButton2Image = answerButton2List[i];

      qnaBackgroundImage.style.backgroundImage = `url(${currentQnaImage})`;
      answerButton1.src = currentAnswerButton1Image;
      answerButton2.src = currentAnswerButton2Image;

      function start() {
        main.style.display = "none";
        qna.style.display = "block";
      }

      function changeQuestionAndAnswer1() {
        i++;
        if (1 <= i && i <= 3) {
          if (i % 2 == 1) {
            E++;
          } else {
            I++;
          }
          console.log("E:" + E);
          console.log("I:" + I);
        } else if (4 <= i && i <= 6) {
          if (i % 2 == 0) {
            N++;
          } else {
            S++;
          }
          console.log("N:" + N);
          console.log("S:" + S);
        } else if (7 <= i && i <= 11) {
          if (i % 2 == 1) {
            F++;
          } else {
            T++;
          }
          console.log("F:" + F);
          console.log("T:" + T);
        } else {
          if (i % 2 == 0) {
            J++;
          } else {
            P++;
          }
          console.log("J:" + J);
          console.log("P:" + P);
        }

        if (i == 14) {
          finish();
          return;
        }

        currentQnaImage = qnaBackgroundList[i];
        currentAnswerButton1Image = answerButton1List[i];
        currentAnswerButton2Image = answerButton2List[i];

        qnaBackground.style.backgroundImage = `url(${currentQnaImage})`;
        answerButton1.src = currentAnswerButton1Image;
        answerButton2.src = currentAnswerButton2Image;
      }

      function changeQuestionAndAnswer2() {
        i++;
        if (1 <= i && i <= 3) {
          if (i % 2 == 0) {
            E++;
          } else {
            I++;
          }
        } else if (4 <= i && i <= 6) {
          if (i % 2 == 1) {
            N++;
          } else {
            S++;
          }
        } else if (7 <= i && i <= 11) {
          if (i % 2 == 0) {
            F++;
          } else {
            T++;
          }
        } else {
          if (i % 2 == 1) {
            J++;
          } else {
            P++;
          }
        }

        if (i == 14) {
          finish();
          return;
        }

        currentQnaImage = qnaBackgroundList[i];
        currentAnswerButton1Image = answerButton1List[i];
        currentAnswerButton2Image = answerButton2List[i];

        qnaBackground.style.backgroundImage = `url(${currentQnaImage})`;
        answerButton1.src = currentAnswerButton1Image;
        answerButton2.src = currentAnswerButton2Image;
      }

      function finish() {
        if (E < I) {
          res += "I";
        } else {
          res += "E";
        }
        if (N < S) {
          res += "S";
        } else {
          res += "N";
        }
        if (F < T) {
          res += "T";
        } else {
          res += "F";
        }
        if (P < J) {
          res += "J";
        } else {
          res += "P";
        }
        console.log(res);
        resultBackgroundImage.style.backgroundImage = `url(img/result/${res}.jpg)`;
        qnaBackground.style.display = "none";
        result.style.display = "block";
      }
    </script>
  </body>
</html>
